<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TruSpace Calculator</title>
<style>

body {
  margin: 0;
  background: #f5f5f5;
  font-family: Helvetica, Arial, sans-serif;
  display: flex;
  justify-content: center;
  padding: 60px 0;
}

.calculator-card {
  width: 619px;
  background: #ffffff;
  border-radius: 30px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.08);
  padding: 40px 30px 0 30px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

.top-note {
  font-size: 15px;
  color: #7a7a7a;
  margin-bottom: 22px;
}

/* INPUT GRID */

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px 28px;
  margin-bottom: 26px;
}

.form-group label {
  font-size: 12px;
  font-weight: 700;
  color: #595959;
  display: block;
  margin-bottom: 7px;
  letter-spacing: 0.04em;
}

.form-group input {
  width: 100%;
  height: 40px;
  border: 1px solid #ddd;
  border-radius: 5px;
  padding: 0 10px;
  font-size: 15px;
  box-sizing: border-box;
  outline: none;
  transition: border-color 0.15s;
  color: #333;
}

.form-group input:focus {
  border-color: #0E85A7;
}

/* METRICS BOX */

.metrics-box {
  width: 558px;
  height: 238px;
  background: #FBFBFB;
  border-radius: 12px;
  margin: 0 auto 22px auto;
  padding: 28px 10px 28px 36px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-sizing: border-box;
}

.metrics {
  color: #595959;
  flex: 1;
}

.metric-main {
  font-size: 21px;
  font-weight: 700;
  margin-bottom: 3px;
  white-space: nowrap;
}

.metric-sub {
  font-size: 12px;
  font-weight: 300;
  color: #999;
  margin-bottom: 18px;
}

.client-average {
  font-size: 13px;
  color: #0E85A7;
  margin-top: 4px;
}

/* DIAL SIDE */

.dial-side {
  width: 280px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.rsf-number {
  font-size: 22px;
  font-weight: 700;
  color: #595959;
  text-align: center;
  margin-bottom: 2px;
}

.rsf-label {
  font-size: 12px;
  color: #595959;
  text-align: center;
  margin-bottom: 6px;
}

/* DIAL */

.dial-wrap {
  position: relative;
  width: 260px;
  height: 130px;
}

.dial-wrap svg {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.dial-center-text {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  padding-bottom: 4px;
  pointer-events: none;
}

.dial-percent {
  font-size: 24px;
  font-weight: 700;
  color: #595959;
  line-height: 1;
  margin-bottom: 2px;
}

.dial-label {
  font-size: 12px;
  color: #0E85A7;
}

/* EQUIVALENCY BOX */

.equivalency {
  width: 558px;
  height: 302px;
  background: #eeeeee;
  border-radius: 10px;
  margin: 0 auto 26px auto;
  padding: 18px 18px 18px 18px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

.equivalency h4 {
  text-align: center;
  font-weight: 400;
  font-size: 13px;
  color: #595959;
  margin: 0 0 14px 0;
  line-height: 1.4;
}

.cards {
  display: flex;
  gap: 10px;
  flex: 1;
}

.card {
  flex: 1;
  background: #ffffff;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 14px 8px 14px 8px;
  box-sizing: border-box;
}

.card h5 {
  font-size: 13px;
  font-weight: 600;
  color: #595959;
  margin: 0 0 4px 0;
}

.card .big {
  font-size: 30px;
  font-weight: 700;
  color: #595959;
  line-height: 1;
  margin-bottom: 3px;
}

.card .avg {
  font-size: 11px;
  color: #999;
  margin-bottom: 10px;
}

.card .floor-icon {
  flex: 1;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card .floor-icon svg {
  width: 90px;
  height: 90px;
}

.card .mult {
  font-size: 15px;
  font-weight: 700;
  color: #595959;
  margin-top: 8px;
}

/* FOOTER */

.footer {
  text-align: center;
  color: #585858;
  padding: 36px 0 56px 0;
}

.footer h3 {
  font-size: 20px;
  font-weight: 500;
  margin: 0 0 10px 0;
}

.footer p {
  font-size: 15px;
  font-weight: 300;
  margin: 0 0 24px 0;
  line-height: 1.6;
}

.button {
  display: inline-block;
  padding: 12px 40px;
  background: #000000;
  color: #ffffff;
  border-radius: 1000px;
  text-decoration: none;
  font-size: 15px;
}

.button:hover { background: #222; }

@media (max-width: 680px) {
  body { padding: 20px 0; }
  .calculator-card { width: 95%; padding: 22px 14px 0 14px; }
  .metrics-box { width: 100%; height: auto; flex-direction: column; gap: 20px; padding: 20px; }
  .dial-side { width: 100%; }
  .equivalency { width: 100%; height: auto; }
  .cards { flex-direction: column; }
  .card { height: auto; }
}

</style>
</head>
<body>

<div class="calculator-card">

  <div class="top-note">
    → Enter your building details below, the model updates in real time.
  </div>

  <div class="form-grid">
    <div class="form-group">
      <label>ANNUAL RENT ($/SF)</label>
      <input type="number" id="annualRent" value="25" min="0" step="0.5">
    </div>
    <div class="form-group">
      <label>BUILDING SQUARE FOOTAGE</label>
      <input type="number" id="buildingSqft" value="50000" min="0" step="1000">
    </div>
    <div class="form-group">
      <label>MARKET CAP RATE (%)</label>
      <input type="number" id="capRate" value="5.5" min="0" max="15" step="0.1">
    </div>
    <div class="form-group">
      <label>HOLD PERIOD (YEARS)</label>
      <input type="number" id="holdPeriod" value="7" min="1" max="30" step="1">
    </div>
  </div>

  <!-- METRICS + DIAL -->
  <div class="metrics-box">

    <div class="metrics">
      <div class="metric-main" id="annualImpact">—</div>
      <div class="metric-sub">Annual / Hold-Period Revenue Impact</div>
      <div class="metric-main" id="assetValue">—</div>
      <div class="metric-sub">Modeled Asset Value Impact</div>
      <div class="client-average">Stevenson Systems Client Average: 6%</div>
    </div>

    <div class="dial-side">
      <div class="rsf-number" id="rsfNumber">+0 RSF</div>
      <div class="rsf-label">Additional Rentable Area</div>

      <div class="dial-wrap">
        <!--
          SVG coordinate setup:
          viewBox: -10 -10 280 150
          Arc center: (120, 120), radius: 110
          Left endpoint (0%):  (10,  120)
          Right endpoint (15%): (230, 120)
          Top (7.5%):           (120,  10)
        -->
        <svg id="dialSvg" viewBox="-10 -10 280 150">

          <!-- Gray base arc: full semicircle left→right through top -->
          <path id="baseArc"
            d="M 10 120 A 110 110 0 0 1 230 120"
            fill="none" stroke="#e0e0e0" stroke-width="7" stroke-linecap="round"/>

          <!-- Teal filled arc (updated by JS) -->
          <path id="filledArc"
            fill="none" stroke="#0E85A7" stroke-width="7" stroke-linecap="round"/>

          <!-- Tick marks (drawn by JS into this group) -->
          <g id="tickGroup"></g>

          <!-- Indicator dot -->
          <circle id="dialDot" cx="10" cy="120" r="6" fill="#0E85A7"/>

        </svg>

        <div class="dial-center-text">
          <div class="dial-percent" id="dialPercent">0.0%</div>
          <div class="dial-label">Recaptured RSF (%)</div>
        </div>
      </div>
    </div>

  </div>

  <!-- EQUIVALENCY -->
  <div class="equivalency">
    <h4 id="equivTitle">— SF in captured square footage is functionally equivalent to:</h4>

    <div class="cards">

      <!-- TENANTS -->
      <div class="card">
        <h5>Tenants</h5>
        <div class="big" id="tenantsVal">0</div>
        <div class="avg">1,000 SF avg</div>
        <div class="floor-icon">
          <!-- Small single-office floor plan -->
          <svg viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Outer walls -->
            <rect x="5" y="5" width="80" height="80" stroke="#aaa" stroke-width="3" fill="#f9f9f9"/>
            <!-- Reception desk area -->
            <rect x="12" y="12" width="32" height="18" stroke="#bbb" stroke-width="1.5" fill="#e8e8e8"/>
            <text x="28" y="24" font-size="5" fill="#888" text-anchor="middle">RECEPTION</text>
            <!-- Private office 1 -->
            <rect x="50" y="12" width="28" height="28" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="64" y="28" font-size="5" fill="#888" text-anchor="middle">OFFICE</text>
            <!-- Corridor line -->
            <line x1="12" y1="35" x2="78" y2="35" stroke="#ccc" stroke-width="1" stroke-dasharray="3 2"/>
            <!-- Open workspace -->
            <rect x="12" y="42" width="40" height="30" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="32" y="59" font-size="5" fill="#888" text-anchor="middle">WORKSPACE</text>
            <!-- Bathroom -->
            <rect x="57" y="42" width="21" height="14" stroke="#bbb" stroke-width="1.5" fill="#e8e8e8"/>
            <text x="67" y="51" font-size="4.5" fill="#888" text-anchor="middle">BATH</text>
            <!-- Storage -->
            <rect x="57" y="58" width="21" height="14" stroke="#bbb" stroke-width="1.5" fill="#e8e8e8"/>
            <text x="67" y="67" font-size="4.5" fill="#888" text-anchor="middle">STORAGE</text>
            <!-- Door notch -->
            <line x1="5" y1="55" x2="12" y2="55" stroke="#fff" stroke-width="3"/>
            <path d="M 5 55 Q 5 48 12 48" stroke="#aaa" stroke-width="1.5" fill="none"/>
          </svg>
        </div>
        <div class="mult" id="tenantsMult">x 0</div>
      </div>

      <!-- SUITES -->
      <div class="card">
        <h5>Suites</h5>
        <div class="big" id="suitesVal">0</div>
        <div class="avg">3,000 SF avg</div>
        <div class="floor-icon">
          <!-- Multi-room suite floor plan -->
          <svg viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Outer walls -->
            <rect x="3" y="3" width="84" height="84" stroke="#aaa" stroke-width="3" fill="#f9f9f9"/>
            <!-- Interior walls dividing into rooms -->
            <line x1="3" y1="38" x2="55" y2="38" stroke="#aaa" stroke-width="2"/>
            <line x1="55" y1="3" x2="55" y2="87" stroke="#aaa" stroke-width="2"/>
            <line x1="55" y1="55" x2="87" y2="55" stroke="#aaa" stroke-width="2"/>
            <!-- Room labels -->
            <!-- Top-left: Conference -->
            <text x="29" y="23" font-size="5" fill="#888" text-anchor="middle">CONF</text>
            <!-- Bottom-left: Open office -->
            <text x="29" y="65" font-size="5" fill="#888" text-anchor="middle">OPEN</text>
            <text x="29" y="72" font-size="5" fill="#888" text-anchor="middle">OFFICE</text>
            <!-- Top-right: Private office -->
            <text x="71" y="23" font-size="5" fill="#888" text-anchor="middle">OFFICE</text>
            <!-- Bottom-right: Bathroom/kitchen -->
            <text x="71" y="67" font-size="4.5" fill="#888" text-anchor="middle">KITCHEN</text>
            <!-- Desk symbols in conf room -->
            <rect x="12" y="16" width="22" height="14" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <!-- Desk in private office -->
            <rect x="62" y="12" width="18" height="12" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <!-- Workstations in open office -->
            <rect x="10" y="44" width="10" height="8" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <rect x="24" y="44" width="10" height="8" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <rect x="10" y="56" width="10" height="8" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <rect x="24" y="56" width="10" height="8" stroke="#ccc" stroke-width="1" fill="#e8e8e8" rx="1"/>
            <!-- Door -->
            <line x1="3" y1="70" x2="3" y2="78" stroke="#fff" stroke-width="3"/>
            <path d="M 3 70 Q 10 70 10 77" stroke="#aaa" stroke-width="1.5" fill="none"/>
          </svg>
        </div>
        <div class="mult" id="suitesMult">x 0</div>
      </div>

      <!-- FLOORS -->
      <div class="card">
        <h5>Floors</h5>
        <div class="big" id="floorsVal">0</div>
        <div class="avg">9,000 SF avg</div>
        <div class="floor-icon">
          <!-- Full-floor plan with multiple suites around a core -->
          <svg viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Outer building outline -->
            <rect x="2" y="2" width="86" height="86" stroke="#aaa" stroke-width="3" fill="#f9f9f9"/>
            <!-- Central core (elevator/stairs) -->
            <rect x="32" y="32" width="26" height="26" stroke="#bbb" stroke-width="2" fill="#e0e0e0"/>
            <text x="45" y="47" font-size="4" fill="#888" text-anchor="middle">CORE</text>
            <!-- Suite A - top left -->
            <rect x="2" y="2" width="28" height="28" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="16" y="17" font-size="4.5" fill="#888" text-anchor="middle">SUITE</text>
            <text x="16" y="23" font-size="4.5" fill="#888" text-anchor="middle">100</text>
            <!-- Suite B - top right -->
            <rect x="60" y="2" width="28" height="28" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="74" y="17" font-size="4.5" fill="#888" text-anchor="middle">SUITE</text>
            <text x="74" y="23" font-size="4.5" fill="#888" text-anchor="middle">110</text>
            <!-- Suite C - bottom left -->
            <rect x="2" y="60" width="28" height="28" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="16" y="75" font-size="4.5" fill="#888" text-anchor="middle">SUITE</text>
            <text x="16" y="81" font-size="4.5" fill="#888" text-anchor="middle">120</text>
            <!-- Suite D - bottom right -->
            <rect x="60" y="60" width="28" height="28" stroke="#bbb" stroke-width="1.5" fill="#efefef"/>
            <text x="74" y="75" font-size="4.5" fill="#888" text-anchor="middle">SUITE</text>
            <text x="74" y="81" font-size="4.5" fill="#888" text-anchor="middle">130</text>
            <!-- Corridor lines -->
            <line x1="30" y1="2"  x2="30" y2="32" stroke="#ccc" stroke-width="1"/>
            <line x1="60" y1="2"  x2="60" y2="32" stroke="#ccc" stroke-width="1"/>
            <line x1="30" y1="58" x2="30" y2="88" stroke="#ccc" stroke-width="1"/>
            <line x1="60" y1="58" x2="60" y2="88" stroke="#ccc" stroke-width="1"/>
            <line x1="2"  y1="30" x2="32" y2="30" stroke="#ccc" stroke-width="1"/>
            <line x1="2"  y1="60" x2="32" y2="60" stroke="#ccc" stroke-width="1"/>
            <line x1="58" y1="30" x2="88" y2="30" stroke="#ccc" stroke-width="1"/>
            <line x1="58" y1="60" x2="88" y2="60" stroke="#ccc" stroke-width="1"/>
          </svg>
        </div>
        <div class="mult" id="floorsMult">x 0</div>
      </div>

    </div>
  </div>

  <div class="footer">
    <h3>Every building is different.</h3>
    <p>
      A brief assessment against your live data validates<br>
      how this opportunity sits inside your building.
    </p>
    <a href="#" class="button">Book a Call</a>
  </div>

</div>

<script>
(function () {

  // ── Arc geometry constants ─────────────────────────────────────
  // SVG viewBox: -10 -10 280 150   (so visible area is -10..270 x -10..140)
  // Arc: center (120, 120), radius 110
  // Left endpoint  (pct=0):  (10,  120)   angle = π
  // Right endpoint (pct=15): (230, 120)   angle = 0
  // Top (pct=7.5):           (120,  10)   angle = π/2

  var CX = 120, CY = 120, R = 110;

  function ptOnArc(pct) {
    // pct 0-15  →  angle π..0  (left to right through top)
    var angle = Math.PI - (pct / 15) * Math.PI;
    return {
      x: CX + R * Math.cos(angle),
      y: CY - R * Math.sin(angle)
    };
  }

  // ── Draw tick marks once ───────────────────────────────────────
  var tickGroup = document.getElementById('tickGroup');

  for (var i = 0; i <= 20; i++) {
    var pctI  = (i / 20) * 15;
    var pt    = ptOnArc(pctI);
    var angle = Math.PI - (pctI / 15) * Math.PI;
    var major = (i % 4 === 0);
    var len   = major ? 11 : 6;

    // Ticks go OUTWARD from the arc (away from center)
    var outerX = CX + (R + len) * Math.cos(angle);
    var outerY = CY - (R + len) * Math.sin(angle);

    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', pt.x.toFixed(2));
    line.setAttribute('y1', pt.y.toFixed(2));
    line.setAttribute('x2', outerX.toFixed(2));
    line.setAttribute('y2', outerY.toFixed(2));
    line.setAttribute('stroke', major ? '#b0b0b0' : '#cccccc');
    line.setAttribute('stroke-width', major ? '2' : '1.2');
    line.setAttribute('stroke-linecap', 'round');
    tickGroup.appendChild(line);
  }

  // ── DOM refs ───────────────────────────────────────────────────
  var filledArc  = document.getElementById('filledArc');
  var dialDot    = document.getElementById('dialDot');
  var dialPct    = document.getElementById('dialPercent');
  var rsfNum     = document.getElementById('rsfNumber');
  var annualEl   = document.getElementById('annualImpact');
  var assetEl    = document.getElementById('assetValue');
  var equivTitle = document.getElementById('equivTitle');
  var tenantsVal = document.getElementById('tenantsVal');
  var suitesVal  = document.getElementById('suitesVal');
  var floorsVal  = document.getElementById('floorsVal');
  var tenantsMult= document.getElementById('tenantsMult');
  var suitesMult = document.getElementById('suitesMult');
  var floorsMult = document.getElementById('floorsMult');

  // ── Update SVG dial ────────────────────────────────────────────
  function setDial(pct) {
    dialPct.textContent = pct.toFixed(1) + '%';

    var end = ptOnArc(pct);

    if (pct < 0.05) {
      filledArc.removeAttribute('d');
      dialDot.setAttribute('cx', ptOnArc(0).x.toFixed(2));
      dialDot.setAttribute('cy', ptOnArc(0).y.toFixed(2));
      return;
    }

    // large-arc-flag: the arc spans at most 180° (semicircle), so always 0
    var d = 'M ' + ptOnArc(0).x.toFixed(2) + ' ' + ptOnArc(0).y.toFixed(2) +
            ' A ' + R + ' ' + R + ' 0 0 1 ' +
            end.x.toFixed(2) + ' ' + end.y.toFixed(2);

    filledArc.setAttribute('d', d);
    dialDot.setAttribute('cx', end.x.toFixed(2));
    dialDot.setAttribute('cy', end.y.toFixed(2));
  }

  // ── Format currency ────────────────────────────────────────────
  function fmt(v) {
    if (v >= 1e6) return '$' + (v / 1e6).toFixed(1) + 'M';
    if (v >= 1e3) return '$' + Math.round(v / 1e3) + 'K';
    return '$' + Math.round(v);
  }

  // ── State ──────────────────────────────────────────────────────
  var currentPct = 0;
  var targetPct  = 0;

  // ── Calculate ─────────────────────────────────────────────────
  function calculate() {
    var rent    = parseFloat(document.getElementById('annualRent').value)   || 0;
    var sqft    = parseFloat(document.getElementById('buildingSqft').value) || 0;
    var capRate = parseFloat(document.getElementById('capRate').value)      || 0;
    var hold    = parseFloat(document.getElementById('holdPeriod').value)   || 7;

    // Recapture % is driven by cap rate (market efficiency) plus a small
    // building-size factor — larger buildings have more latent inefficiency.
    var sizeFactor = Math.min(sqft / 50000, 2.0); // 0–2 pts based on sqft
    targetPct = Math.min(Math.max(capRate * 2.0 + sizeFactor, 0), 15);

    var recaptured   = sqft * (targetPct / 100);
    var annualRev    = rent * recaptured;
    var holdRev      = annualRev * hold;
    var assetImpact  = capRate > 0 ? annualRev / (capRate / 100) : 0;

    annualEl.textContent  = fmt(annualRev) + ' / ' + fmt(holdRev);
    assetEl.textContent   = fmt(assetImpact);
    rsfNum.textContent    = '+' + Math.round(recaptured).toLocaleString() + ' RSF';

    var tenants = Math.max(Math.round(recaptured / 1000), 0);
    var suites  = Math.max(Math.round(recaptured / 3000), 0);
    var floors  = Math.max(Math.round(recaptured / 9000), 0);

    tenantsVal.textContent  = tenants;
    suitesVal.textContent   = suites;
    floorsVal.textContent   = floors;
    tenantsMult.textContent = 'x ' + tenants;
    suitesMult.textContent  = 'x ' + suites;
    floorsMult.textContent  = 'x ' + floors;

    var sfStr = Math.round(recaptured).toLocaleString();
    equivTitle.textContent = sfStr + ' SF in captured square footage is functionally equivalent to:';
  }

  // ── Animation loop ─────────────────────────────────────────────
  function tick() {
    var diff = targetPct - currentPct;
    if (Math.abs(diff) > 0.005) {
      currentPct += diff * 0.1;
    } else {
      currentPct = targetPct;
    }
    setDial(currentPct);
    requestAnimationFrame(tick);
  }

  // ── Wire up inputs ─────────────────────────────────────────────
  // Listen to both 'input' (typing) and 'change' (tab-away / spin buttons)
  ['annualRent', 'buildingSqft', 'capRate', 'holdPeriod'].forEach(function (id) {
    var el = document.getElementById(id);
    el.addEventListener('input', calculate);
    el.addEventListener('change', calculate);
  });

  // ── Init ───────────────────────────────────────────────────────
  calculate();
  requestAnimationFrame(tick);

})();
</script>
</body>
</html>
