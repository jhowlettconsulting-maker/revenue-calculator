<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TruSpace Calculator</title>

<style>

body{
margin:0;
background:#f5f5f5;
font-family:Helvetica, Arial, sans-serif;
display:flex;
justify-content:center;
padding:60px 0;
}

/* MAIN CARD */

.calculator-card{
width:619px;
height:985px;
background:#ffffff;
border-radius:30px;
box-shadow:0 15px 40px rgba(0,0,0,0.08);
padding:40px 30px 0 30px;
box-sizing:border-box;
display:flex;
flex-direction:column;
}

/* HEADER */

.top-note{
font-size:16px;
color:#7a7a7a;
margin-bottom:25px;
}

/* INPUT GRID */

.form-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px 30px;
margin-bottom:30px;
}

.form-group label{
font-size:15px;
font-weight:600;
color:#595959;
display:block;
margin-bottom:8px;
}

.form-group input{
width:100%;
height:40px;
border:1px solid #ddd;
border-radius:5px;
padding:8px;
font-size:14px;
box-sizing:border-box;
}

/* METRICS BOX */

.metrics-box{
width:558px;
height:238px;
background:#FBFBFB;
border-radius:12px;
margin:0 auto 25px auto;
padding:25px 25px 25px 40px;
display:flex;
justify-content:space-between;
align-items:flex-start;
box-sizing:border-box;
}

.metrics{
width:255px;
color:#595959;
}

.metric-main{
font-size:22px;
font-weight:700;
margin-bottom:6px;
}

.metric-sub{
font-size:14px;
font-weight:300;
margin-bottom:16px;
}

.client-average{
font-size:14px;
color:#0E85A7;
margin-top:20px;
white-space:nowrap;
}

/* DIAL SIDE */

.dial-side{
width:263px;
display:flex;
flex-direction:column;
align-items:center;
position:relative;
right:-10px;
}

.rsf-number{
font-size:24px;
font-weight:700;
color:#595959;
text-align:center;
}

.rsf-label{
font-size:14px;
color:#595959;
margin-bottom:10px;
text-align:center;
}

/* DIAL */

.dial{
width:310px;
height:140px;
position:relative;
}

.dial svg{
width:100%;
height:100%;
}

.dial-percent{
position:absolute;
top:48px;
left:0;
right:0;
text-align:center;
font-size:26px;
font-weight:700;
color:#595959;
}

.dial-text{
position:absolute;
top:82px;
left:0;
right:0;
text-align:center;
font-size:18px;
color:#0E85A7;
}

/* EQUIVALENCY BOX */

.equivalency{
width:563px;
height:302px;
background:#eeeeee;
border-radius:10px;
margin:0 auto 30px auto;
padding:20px;
box-sizing:border-box;
}

.equivalency h4{
text-align:center;
font-weight:500;
font-size:15px;
margin-bottom:15px;
}

.cards{
display:flex;
justify-content:space-between;
}

.card{
width:165px;
height:199px;
background:#ffffff;
border-radius:3px;
text-align:center;
padding-top:12px;
box-sizing:border-box;
}

.card h5{
font-size:14px;
margin-bottom:4px;
}

.card .big{
font-size:30px;
font-weight:700;
margin-bottom:4px;
}

.card .avg{
font-size:14px;
margin-bottom:10px;
}

.card img{
max-width:90px;
margin-bottom:6px;
}

.card .mult{
font-size:16px;
font-weight:700;
}

/* FOOTER */

.footer{
margin-top:auto;
text-align:center;
color:#585858;
padding:40px 0 60px 0;
}

.footer h3{
font-size:20px;
font-weight:500;
margin-bottom:10px;
}

.footer p{
font-size:16px;
font-weight:300;
margin-bottom:25px;
line-height:1.5;
}

.button{
display:inline-block;
padding:12px 35px;
background:#000000;
color:#ffffff;
border-radius:1000px;
text-decoration:none;
font-size:15px;
}

/* RESPONSIVE */

@media(max-width:768px){

.calculator-card{
width:95%;
height:auto;
padding-bottom:40px;
}

.metrics-box{
flex-direction:column;
height:auto;
gap:20px;
}

.equivalency{
width:100%;
height:auto;
}

.cards{
flex-direction:column;
align-items:center;
gap:15px;
}

}

</style>
</head>

<body>

<div class="calculator-card">

<div class="top-note">
→ Enter your building details below, the model updates in real time.
</div>

<div class="form-grid">
<div class="form-group">
<label>ANNUAL RENT ($/SF)</label>
<input type="text" id="annualRent" value="25" placeholder="e.g., 25">
</div>
<div class="form-group">
<label>BUILDING SQUARE FOOTAGE</label>
<input type="text" id="buildingSqft" value="50000" placeholder="e.g., 50000">
</div>
<div class="form-group">
<label>MARKET CAP RATE (%)</label>
<input type="text" id="capRate" value="5.5" placeholder="e.g., 5.5">
</div>
<div class="form-group">
<label>HOLD PERIOD (YEARS)</label>
<input type="text" id="holdPeriod" value="7" placeholder="e.g., 7">
</div>
</div>

<div class="metrics-box">

<div class="metrics">
<div class="metric-main" id="annualImpact">$675K / $4.7M</div>
<div class="metric-sub">Annual / 7-Year Revenue Impact</div>

<div class="metric-main" id="assetValue">$11.3M</div>
<div class="metric-sub">Modeled Asset Value Impact</div>

<div class="client-average">
Stevenson Systems Client Average: 6%
</div>
</div>

<div class="dial-side">
<div class="rsf-number" id="rsfNumber">+15.7 RSF</div>
<div class="rsf-label">Additional Rentable Area</div>

<div class="dial">

<svg viewBox="0 0 300 150" id="dialSvg">
<!-- Base arc (gray background) -->
<path id="baseArc" d="M20 140 A130 130 0 0 1 280 140"
fill="none"
stroke="#d0d0d0"
stroke-width="6"
stroke-linecap="round"/>

<!-- Filled arc (blue - animates) -->
<path id="filledArc" d="M20 140 A130 130 0 0 1 280 140"
fill="none"
stroke="#0E85A7"
stroke-width="6"
stroke-linecap="round"
stroke-dasharray="0 1000"
stroke-dashoffset="0"/>

<!-- Tick marks around arc -->
<g id="tickMarks">
</g>

<!-- Ticker indicator (small vertical line) -->
<g id="ticker" transform="translate(150, 10)">
<rect x="-2" y="0" width="4" height="8" fill="#0E85A7" rx="2"/>
</g>
</svg>

<div class="dial-percent" id="dialPercent">6%</div>
<div class="dial-text">Recaptured RSF (%)</div>

</div>
</div>

</div>

<div class="equivalency">
<h4 id="equivalencyTitle">18,000 SF in captured square footage is functionally equivalent to:</h4>

<div class="cards">

<div class="card">
<h5>Tenants</h5>
<div class="big" id="tenantsCount">18</div>
<div class="avg">5,000 SF avg</div>
<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='10' y='10' width='80' height='80' fill='%23ccc' rx='5'/%3E%3C/svg%3E" alt="Tenant">
<div class="mult" id="tenantsMult">x 18</div>
</div>

<div class="card">
<h5>Suites</h5>
<div class="big" id="suitesCount">5</div>
<div class="avg">5,000 SF avg</div>
<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='10' y='10' width='80' height='80' fill='%23ccc' rx='5'/%3E%3C/svg%3E" alt="Suite">
<div class="mult" id="suitesMult">x 5</div>
</div>

<div class="card">
<h5>Floors</h5>
<div class="big" id="floorsCount">2</div>
<div class="avg">9,000 SF avg</div>
<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='10' y='10' width='80' height='80' fill='%23ccc' rx='5'/%3E%3C/svg%3E" alt="Floor">
<div class="mult" id="floorsMult">x 2</div>
</div>

</div>
</div>

<div class="footer">
<h3>Every building is different.</h3>
<p>
A brief assessment against your live data validates<br>
how this opportunity sits inside your building.
</p>

<a href="#" class="button">Book</a>
</div>

</div>

<script>

// ============================================
// CALCULATOR CONTROLLER
// ============================================

class TruSpaceCalculator {
  constructor() {
    // Input elements
    this.annualRentInput = document.getElementById('annualRent');
    this.buildingSqftInput = document.getElementById('buildingSqft');
    this.capRateInput = document.getElementById('capRate');
    this.holdPeriodInput = document.getElementById('holdPeriod');

    // Output elements
    this.dialPercent = document.getElementById('dialPercent');
    this.rsfNumber = document.getElementById('rsfNumber');
    this.annualImpact = document.getElementById('annualImpact');
    this.assetValue = document.getElementById('assetValue');
    this.equivalencyTitle = document.getElementById('equivalencyTitle');
    this.tenantsCount = document.getElementById('tenantsCount');
    this.suitesCount = document.getElementById('suitesCount');
    this.floorsCount = document.getElementById('floorsCount');
    this.tenantsMult = document.getElementById('tenantsMult');
    this.suitesMult = document.getElementById('suitesMult');
    this.floorsMult = document.getElementById('floorsMult');

    // SVG elements
    this.filledArc = document.getElementById('filledArc');
    this.ticker = document.getElementById('ticker');
    this.tickMarks = document.getElementById('tickMarks');

    // Current value for smooth animation
    this.currentPercentage = 6;
    this.targetPercentage = 6;
    this.animationId = null;

    // Setup event listeners
    this.setupEventListeners();

    // Draw initial tick marks
    this.drawTickMarks();

    // Initial calculation
    this.calculate();

    // Start animation loop
    this.startAnimationLoop();
  }

  setupEventListeners() {
    this.annualRentInput.addEventListener('input', () => this.calculate());
    this.buildingSqftInput.addEventListener('input', () => this.calculate());
    this.capRateInput.addEventListener('input', () => this.calculate());
    this.holdPeriodInput.addEventListener('input', () => this.calculate());
  }

  drawTickMarks() {
    this.tickMarks.innerHTML = '';
    const tickCount = 16; // Ticks for 0-15%
    const arcStart = 20;
    const arcEnd = 280;
    const arcRadius = 130;
    const centerX = 150;
    const centerY = 140;

    for (let i = 0; i <= tickCount; i++) {
      const angle = (i / tickCount) * Math.PI; // 0 to π for semicircle
      const outerX = centerX + arcRadius * Math.cos(angle);
      const outerY = centerY - arcRadius * Math.sin(angle);
      const innerX = centerX + (arcRadius - 8) * Math.cos(angle);
      const innerY = centerY - (arcRadius - 8) * Math.sin(angle);

      const tickLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      tickLine.setAttribute('x1', innerX);
      tickLine.setAttribute('y1', innerY);
      tickLine.setAttribute('x2', outerX);
      tickLine.setAttribute('y2', outerY);
      tickLine.setAttribute('stroke', '#d0d0d0');
      tickLine.setAttribute('stroke-width', '2');
      tickLine.setAttribute('stroke-linecap', 'round');
      this.tickMarks.appendChild(tickLine);
    }
  }

  calculate() {
    const annualRent = parseFloat(this.annualRentInput.value) || 0;
    const buildingSqft = parseFloat(this.buildingSqftInput.value) || 0;
    const capRate = parseFloat(this.capRateInput.value) || 0;
    const holdPeriod = parseFloat(this.holdPeriodInput.value) || 7;

    // Calculate recaptured percentage (driven by cap rate)
    // Formula: Cap rate drives the percentage (0-15%)
    this.targetPercentage = Math.min(Math.max(capRate * 2.7, 0), 15);

    // Annual revenue impact
    const annualRevenue = (annualRent * buildingSqft) * (this.targetPercentage / 100);

    // 7-year total
    const sevenYearRevenue = annualRevenue * holdPeriod;

    // Asset value (using cap rate: value = net operating income / cap rate)
    const assetValueImpact = (annualRevenue / (capRate / 100)) || 0;

    // Recaptured RSF
    const recapturedSF = (buildingSqft * (this.targetPercentage / 100));

    // Update metrics
    this.updateMetrics(annualRevenue, sevenYearRevenue, assetValueImpact, recapturedSF, this.targetPercentage);

    // Update equivalency
    this.updateEquivalency(recapturedSF);
  }

  updateMetrics(annual, sevenYear, assetValue, recapturedSF, percentage) {
    // Format currency
    const formatCurrency = (value) => {
      if (value >= 1000000) {
        return '$' + (value / 1000000).toFixed(1) + 'M';
      } else if (value >= 1000) {
        return '$' + (value / 1000).toFixed(0) + 'K';
      }
      return '$' + value.toFixed(0);
    };

    // Update impact line
    this.annualImpact.textContent = formatCurrency(annual) + ' / ' + formatCurrency(sevenYear);

    // Update asset value
    this.assetValue.textContent = formatCurrency(assetValue);

    // Update RSF
    this.rsfNumber.textContent = '+' + recapturedSF.toFixed(1) + ' RSF';
  }

  updateEquivalency(totalSF) {
    const avgTenantSF = 5000;
    const avgSuiteSF = 5000;
    const avgFloorSF = 9000;

    const tenants = Math.round(totalSF / avgTenantSF);
    const suites = Math.round(totalSF / avgSuiteSF);
    const floors = Math.round(totalSF / avgFloorSF);

    this.tenantsCount.textContent = tenants;
    this.suitesCount.textContent = suites;
    this.floorsCount.textContent = floors;
    this.tenantsMult.textContent = 'x ' + tenants;
    this.suitesMult.textContent = 'x ' + suites;
    this.floorsMult.textContent = 'x ' + floors;

    this.equivalencyTitle.textContent = totalSF.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' SF in captured square footage is functionally equivalent to:';
  }

  startAnimationLoop() {
    const animate = () => {
      // Smooth easing towards target
      const diff = this.targetPercentage - this.currentPercentage;
      if (Math.abs(diff) > 0.01) {
        this.currentPercentage += diff * 0.15; // Easing factor
      } else {
        this.currentPercentage = this.targetPercentage;
      }

      // Update dial display
      this.updateDial(this.currentPercentage);

      this.animationId = requestAnimationFrame(animate);
    };
    animate();
  }

  updateDial(percentage) {
    // Update percentage text
    this.dialPercent.textContent = percentage.toFixed(1) + '%';

    // Calculate arc path (semicircle from 0-15%)
    const arcRadius = 130;
    const centerX = 150;
    const centerY = 140;
    const maxAngle = Math.PI; // 180 degrees for semicircle

    // Calculate stroke-dasharray for arc fill
    // Full arc length for semicircle: π * radius
    const fullArcLength = Math.PI * arcRadius;
    const filledLength = (percentage / 15) * fullArcLength;

    this.filledArc.setAttribute('stroke-dasharray', filledLength + ' ' + fullArcLength);

    // Update ticker position
    const tickerAngle = (percentage / 15) * Math.PI;
    const tickerX = centerX + arcRadius * Math.cos(tickerAngle);
    const tickerY = centerY - arcRadius * Math.sin(tickerAngle);
    this.ticker.setAttribute('transform', `translate(${tickerX}, ${tickerY})`);
  }
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  new TruSpaceCalculator();
});

</script>

</body>
</html>
