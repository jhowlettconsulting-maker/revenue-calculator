<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TruSpace Calculator</title>
<style>

* { box-sizing: border-box; }

body {
  margin: 0;
  background: #f0f0f0;
  font-family: Helvetica, Arial, sans-serif;
  display: flex;
  justify-content: center;
  padding: 60px 0;
}

/* ── CARD ─────────────────────────────────────────────── */

.calculator-card {
  width: 613px;
  background: #ffffff;
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.09);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* ── TOP STRIP ────────────────────────────────────────── */

.top-strip {
  background: #F4F4F4;
  height: 62px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
  font-weight: 300;
  color: #666;
  flex-shrink: 0;
  letter-spacing: 0.01em;
}

/* ── FORM ─────────────────────────────────────────────── */

.form-section {
  padding: 20px 30px 16px 30px;
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  column-gap: 7px;
  row-gap: 12px;
}

.form-group label {
  font-size: 11px;
  font-weight: 700;
  color: #595959;
  display: block;
  margin-bottom: 5px;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.form-group input {
  width: 100%;
  height: 39px;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 0 10px;
  font-size: 14px;
  outline: none;
  color: #333;
  font-family: Helvetica, Arial, sans-serif;
  transition: border-color 0.15s;
  background: #fff;
}

.form-group input:focus { border-color: #0E85A7; }

/* ── METRICS + DIAL ROW ───────────────────────────────── */

.metrics-row {
  display: flex;
  gap: 10px;
  padding: 0 30px;
  align-items: stretch;
}

/* LEFT STATS */

.stats-box {
  width: 246px;
  flex-shrink: 0;
  background: #F4F4F4;
  border-radius: 5px;
  padding: 18px 20px 18px 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.metric-main {
  font-size: 20px;
  font-weight: 700;
  color: #333;
  white-space: nowrap;
  line-height: 1.15;
  margin-bottom: 3px;
}

.metric-sub {
  font-size: 11px;
  font-weight: 300;
  color: #999;
  margin-bottom: 16px;
  line-height: 1.35;
}

.client-average {
  font-size: 12px;
  color: #0E85A7;
  font-weight: 400;
  white-space: nowrap;
}

/* RIGHT DIAL BOX */

.dial-box {
  flex: 1;
  background: #F4F4F4;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 14px 0 0 0;
  overflow: hidden;
}

.rsf-number {
  font-size: 25px;
  font-weight: 700;
  color: #333;
  text-align: center;
  line-height: 1;
  margin-bottom: 2px;
}

.rsf-label {
  font-size: 11px;
  font-weight: 300;
  color: #595959;
  text-align: center;
  margin-bottom: 4px;
}

.dial-wrap {
  position: relative;
  width: 100%;
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
}

.dial-wrap:active { cursor: grabbing; }

.dial-wrap svg {
  width: 100%;
  display: block;
}

.dial-center-text {
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 48px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.dial-percent {
  font-size: 19px;
  font-weight: 700;
  color: #333;
  line-height: 1;
  margin-bottom: 3px;
}

.dial-label {
  font-size: 11px;
  color: #0E85A7;
  font-weight: 400;
}

/* ── EQUIVALENCY BOX ──────────────────────────────────── */

.equivalency {
  width: 553px;
  background: #EEEEEE;
  border-radius: 14px;
  margin: 14px auto 0 auto;
  padding: 16px 14px 14px 14px;
  display: flex;
  flex-direction: column;
}

.equiv-title {
  text-align: center;
  font-size: 12px;
  font-weight: 400;
  color: #595959;
  margin: 0 0 10px 0;
  line-height: 1.45;
}

.cards {
  display: flex;
  gap: 10px;
}

.card {
  flex: 1;
  background: #ffffff;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 6px 10px 6px;
}

.card-title {
  font-size: 12px;
  font-weight: 600;
  color: #595959;
  margin: 0 0 2px 0;
}

.card-number {
  font-size: 28px;
  font-weight: 700;
  color: #333;
  font-family: system-ui, Helvetica, sans-serif;
  line-height: 1;
  margin-bottom: 1px;
}

.card-avg {
  font-size: 10px;
  color: #aaa;
  margin-bottom: 6px;
}

.floor-icon {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-mult {
  font-size: 13px;
  font-weight: 700;
  color: #595959;
  margin-top: 6px;
}

/* ── FOOTER ───────────────────────────────────────────── */

.footer {
  text-align: center;
  padding: 28px 30px 46px 30px;
}

.footer h3 {
  font-size: 20px;
  font-weight: 500;
  color: #333;
  margin: 0 0 8px 0;
}

.footer p {
  font-size: 15px;
  font-weight: 300;
  color: #585858;
  margin: 0 0 22px 0;
  line-height: 1.6;
}

.btn-book {
  display: inline-block;
  width: 117px;
  height: 36px;
  line-height: 36px;
  background: #000;
  color: #fff;
  border-radius: 1000px;
  text-decoration: none;
  font-size: 15px;
  font-family: Helvetica, Arial, sans-serif;
  text-align: center;
}

.btn-book:hover { background: #222; }

/* ── RESPONSIVE ───────────────────────────────────────── */

@media (max-width: 680px) {
  body { padding: 20px 0; }
  .calculator-card { width: 95%; }
  .metrics-row { flex-direction: column; padding: 0 16px; }
  .stats-box { width: 100%; }
  .equivalency { width: 100%; }
  .cards { flex-direction: column; }
}

</style>
</head>
<body>

<div class="calculator-card">

  <!-- TOP STRIP -->
  <div class="top-strip">
    → Enter your building details below, the model updates in real time.
  </div>

  <!-- INPUTS -->
  <div class="form-section">
    <div class="form-grid">
      <div class="form-group">
        <label>Annual Rent ($/SF)</label>
        <input type="number" id="annualRent" value="25" min="0" step="0.5">
      </div>
      <div class="form-group">
        <label>Building Square Footage</label>
        <input type="number" id="buildingSqft" value="50000" min="0" step="1000">
      </div>
      <div class="form-group">
        <label>Market Cap Rate (%)</label>
        <input type="number" id="capRate" value="5.5" min="0" max="15" step="0.1">
      </div>
      <div class="form-group">
        <label>Hold Period (Years)</label>
        <input type="number" id="holdPeriod" value="7" min="1" max="30" step="1">
      </div>
    </div>
  </div>

  <!-- METRICS + DIAL -->
  <div class="metrics-row">

    <div class="stats-box">
      <div class="metric-main" id="annualImpact">—</div>
      <div class="metric-sub">Annual / Hold-Period Revenue Impact</div>
      <div class="metric-main" id="assetValue">—</div>
      <div class="metric-sub">Modeled Asset Value Impact</div>
      <div class="client-average">Stevenson Systems Client Average: 6%</div>
    </div>

    <div class="dial-box">
      <div class="rsf-number" id="rsfNumber">+0 RSF</div>
      <div class="rsf-label">Additional Rentable Area</div>

      <div class="dial-wrap" id="dialWrap">
        <!--
          viewBox 0 0 300 200
          Arc center: (150, 150), radius: 120
          Left endpoint (0%):   angle=π   → (30, 150)
          Top   (8%, center):   angle=π/2 → (150, 30)
          Right endpoint (15%): angle→0   → (270, 150)
          Non-linear mapping: 0–8% occupies left half, 8–15% occupies right half
        -->
        <svg id="dialSvg" viewBox="0 0 300 200">

          <!-- Base arc: grey full semicircle -->
          <path id="baseArc"
            d="M 30 150 A 120 120 0 0 1 270 150"
            fill="none" stroke="#CFCFCF" stroke-width="6" stroke-linecap="round"/>

          <!-- Active arc: dark grey, updated by JS -->
          <path id="activeArc"
            fill="none" stroke="#4F4F4F" stroke-width="6" stroke-linecap="round"/>

          <!-- Tick marks: drawn by JS -->
          <g id="tickGroup"></g>

          <!-- Control tag handle: positioned + rotated by JS -->
          <rect id="controlTag"
            x="-1.5" y="-7" width="3" height="14" rx="2" ry="2"
            fill="#BDBDBD"/>

        </svg>

        <div class="dial-center-text">
          <div class="dial-percent" id="dialPercent">0.0%</div>
          <div class="dial-label">Recaptured RSF (%)</div>
        </div>
      </div>
    </div>

  </div>

  <!-- EQUIVALENCY -->
  <div class="equivalency">
    <p class="equiv-title" id="equivTitle">— SF in captured square footage is functionally equivalent to:</p>

    <div class="cards">

      <!-- TENANTS -->
      <div class="card">
        <div class="card-title">Tenants</div>
        <div class="card-number" id="tenantsVal">0</div>
        <div class="card-avg">1,000 SF avg</div>
        <div class="floor-icon">
          <!-- Single office, green tint -->
          <svg width="78" height="76" viewBox="0 0 78 76" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="4" width="70" height="68" rx="1" fill="#F1F8E9"/>
            <rect x="4" y="4" width="70" height="68" rx="1" stroke="#7CB342" stroke-width="2"/>
            <!-- Partition -->
            <line x1="4" y1="38" x2="52" y2="38" stroke="#7CB342" stroke-width="1.5"/>
            <line x1="52" y1="4" x2="52" y2="72" stroke="#7CB342" stroke-width="1.5"/>
            <!-- Desk top-left -->
            <rect x="10" y="10" width="24" height="16" rx="1" fill="#C5E1A5" stroke="#8BC34A" stroke-width="1"/>
            <!-- Side return -->
            <rect x="10" y="10" width="8" height="22" rx="1" fill="#DCEDC8" stroke="#AED581" stroke-width="1"/>
            <!-- Desk top-right room -->
            <rect x="58" y="10" width="10" height="10" rx="1" fill="#C5E1A5" stroke="#8BC34A" stroke-width="1"/>
            <!-- Bottom open area marks -->
            <rect x="10" y="44" width="32" height="6" rx="1" fill="#DCEDC8" stroke="#AED581" stroke-width="1"/>
            <rect x="10" y="54" width="20" height="6" rx="1" fill="#DCEDC8" stroke="#AED581" stroke-width="1"/>
            <!-- Door arc -->
            <line x1="4" y1="58" x2="4" y2="66" stroke="#F1F8E9" stroke-width="2.5"/>
            <path d="M4 58 Q14 58 14 66" stroke="#7CB342" stroke-width="1.2" fill="none"/>
          </svg>
        </div>
        <div class="card-mult" id="tenantsMult">x 0</div>
      </div>

      <!-- SUITES -->
      <div class="card">
        <div class="card-title">Suites</div>
        <div class="card-number" id="suitesVal">0</div>
        <div class="card-avg">3,000 SF avg</div>
        <div class="floor-icon">
          <!-- Multi-room suite, blue tint -->
          <svg width="84" height="72" viewBox="0 0 84 72" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="4" width="76" height="64" rx="1" fill="#E3F2FD"/>
            <rect x="4" y="4" width="76" height="64" rx="1" stroke="#1E88E5" stroke-width="2"/>
            <!-- Horizontal wall -->
            <line x1="4" y1="36" x2="80" y2="36" stroke="#1E88E5" stroke-width="1.5"/>
            <!-- Vertical wall top -->
            <line x1="46" y1="4" x2="46" y2="36" stroke="#1E88E5" stroke-width="1.5"/>
            <!-- Conference table top-left -->
            <rect x="9" y="11" width="26" height="15" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <!-- Office desk top-right -->
            <rect x="52" y="10" width="18" height="13" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <!-- Workstations bottom row -->
            <rect x="9" y="42" width="10" height="8" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <rect x="22" y="42" width="10" height="8" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <rect x="35" y="42" width="10" height="8" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <rect x="48" y="42" width="10" height="8" rx="1" fill="#BBDEFB" stroke="#42A5F5" stroke-width="1"/>
            <!-- Door arc -->
            <line x1="4" y1="56" x2="4" y2="64" stroke="#E3F2FD" stroke-width="2.5"/>
            <path d="M4 56 Q14 56 14 64" stroke="#1E88E5" stroke-width="1.2" fill="none"/>
          </svg>
        </div>
        <div class="card-mult" id="suitesMult">x 0</div>
      </div>

      <!-- FLOORS -->
      <div class="card">
        <div class="card-title">Floors</div>
        <div class="card-number" id="floorsVal">0</div>
        <div class="card-avg">9,000 SF avg</div>
        <div class="floor-icon">
          <!-- Full floor with core, grey tint -->
          <svg width="84" height="72" viewBox="0 0 84 72" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="78" height="66" rx="1" fill="#F5F5F5"/>
            <rect x="3" y="3" width="78" height="66" rx="1" stroke="#9E9E9E" stroke-width="2"/>
            <!-- Central core -->
            <rect x="30" y="24" width="24" height="24" rx="1" fill="#E0E0E0" stroke="#BDBDBD" stroke-width="1.5"/>
            <text x="42" y="39" font-size="5" fill="#9E9E9E" text-anchor="middle" font-family="Helvetica,Arial,sans-serif">CORE</text>
            <!-- Suite TL -->
            <rect x="3" y="3" width="25" height="20" rx="1" stroke="#BDBDBD" stroke-width="1" fill="#FAFAFA"/>
            <!-- Suite TR -->
            <rect x="56" y="3" width="25" height="20" rx="1" stroke="#BDBDBD" stroke-width="1" fill="#FAFAFA"/>
            <!-- Suite BL -->
            <rect x="3" y="49" width="25" height="20" rx="1" stroke="#BDBDBD" stroke-width="1" fill="#FAFAFA"/>
            <!-- Suite BR -->
            <rect x="56" y="49" width="25" height="20" rx="1" stroke="#BDBDBD" stroke-width="1" fill="#FAFAFA"/>
            <!-- Corridor lines -->
            <line x1="28" y1="13" x2="30" y2="13" stroke="#DDD" stroke-width="1"/>
            <line x1="54" y1="13" x2="56" y2="13" stroke="#DDD" stroke-width="1"/>
            <line x1="28" y1="59" x2="30" y2="59" stroke="#DDD" stroke-width="1"/>
            <line x1="54" y1="59" x2="56" y2="59" stroke="#DDD" stroke-width="1"/>
          </svg>
        </div>
        <div class="card-mult" id="floorsMult">x 0</div>
      </div>

    </div>
  </div>

  <!-- FOOTER (inside the white card) -->
  <div class="footer">
    <h3>Every building is different.</h3>
    <p>
      A brief assessment against your live data validates<br>
      how this opportunity sits inside your building.
    </p>
    <a href="#" class="btn-book">Book</a>
  </div>

</div>

<script>
(function () {

  // ── Constants ────────────────────────────────────────────────────
  var CX = 150, CY = 150, R = 120;
  var TICKS   = 90;   // total tick lines across 0–15%
  var MAX_PCT = 15;

  // ── Non-linear angle mapping ─────────────────────────────────────
  // 0% → π (left)   8% → π/2 (visual center/top)   15% → ~0 (right)
  // 0–8% occupies the left half of the arc (π → π/2)
  // 8–15% occupies the right half (π/2 → 0)
  function percentToAngle(p) {
    p = Math.min(Math.max(p, 0), MAX_PCT);
    if (p <= 8) return Math.PI - (p / 8) * (Math.PI / 2);
    return (Math.PI / 2) * (1 - (p - 8) / 7);
  }

  function angleToPercent(a) {
    a = Math.min(Math.max(a, 0), Math.PI);
    if (a >= Math.PI / 2) return ((Math.PI - a) / (Math.PI / 2)) * 8;
    return 8 + ((Math.PI / 2 - a) / (Math.PI / 2)) * 7;
  }

  function polar(angle) {
    return {
      x: CX + R * Math.cos(angle),
      y: CY - R * Math.sin(angle)
    };
  }

  // ── Arc path ─────────────────────────────────────────────────────
  function describeArc(pct) {
    if (pct < 0.05) return '';
    pct = Math.min(pct, 14.99); // avoid degenerate 180° case
    var s = polar(percentToAngle(0));
    var e = polar(percentToAngle(pct));
    // Arc is always < 180°: large-arc-flag=0, sweep-flag=1 (clockwise = upper arc)
    return 'M ' + s.x.toFixed(2) + ' ' + s.y.toFixed(2) +
           ' A ' + R + ' ' + R + ' 0 0 1 ' +
           e.x.toFixed(2) + ' ' + e.y.toFixed(2);
  }

  // ── Build tick marks ─────────────────────────────────────────────
  var tickGroup = document.getElementById('tickGroup');
  var tickData  = [];

  for (var i = 0; i <= TICKS; i++) {
    var tPct   = (i / TICKS) * MAX_PCT;
    var tAngle = percentToAngle(tPct);
    // Major tick every 6th = every ~1%
    var isMajor = (i % 6 === 0);
    var gap     = 3;              // space between arc edge and tick start
    var len     = isMajor ? 9 : 5;

    var ix = CX + (R + gap)       * Math.cos(tAngle);
    var iy = CY - (R + gap)       * Math.sin(tAngle);
    var ox = CX + (R + gap + len) * Math.cos(tAngle);
    var oy = CY - (R + gap + len) * Math.sin(tAngle);

    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', ix.toFixed(2));
    line.setAttribute('y1', iy.toFixed(2));
    line.setAttribute('x2', ox.toFixed(2));
    line.setAttribute('y2', oy.toFixed(2));
    line.setAttribute('stroke-width', isMajor ? '1.8' : '0.9');
    line.setAttribute('stroke-linecap', 'round');
    line.setAttribute('stroke', '#EDEDED');
    tickGroup.appendChild(line);
    tickData.push({ el: line, pct: tPct });
  }

  function updateTickColors(pct) {
    for (var j = 0; j < tickData.length; j++) {
      var t = tickData[j];
      if (t.pct <= pct) {
        // Gradient: #999 at 0% → #444 at currentPct
        var progress = pct > 0 ? t.pct / pct : 0;
        var v = Math.round(153 - progress * 85); // 153=#99, 68=#44
        t.el.setAttribute('stroke', 'rgb(' + v + ',' + v + ',' + v + ')');
      } else {
        t.el.setAttribute('stroke', '#EDEDED');
      }
    }
  }

  // ── DOM refs ─────────────────────────────────────────────────────
  var activeArcEl  = document.getElementById('activeArc');
  var controlTagEl = document.getElementById('controlTag');
  var dialPctEl    = document.getElementById('dialPercent');
  var rsfNumEl     = document.getElementById('rsfNumber');
  var annualEl     = document.getElementById('annualImpact');
  var assetEl      = document.getElementById('assetValue');
  var equivTitleEl = document.getElementById('equivTitle');
  var tenantsValEl = document.getElementById('tenantsVal');
  var suitesValEl  = document.getElementById('suitesVal');
  var floorsValEl  = document.getElementById('floorsVal');
  var tenantsMult  = document.getElementById('tenantsMult');
  var suitesMult   = document.getElementById('suitesMult');
  var floorsMult   = document.getElementById('floorsMult');

  // ── State ─────────────────────────────────────────────────────────
  var currentPct = 0;

  // ── Format ────────────────────────────────────────────────────────
  function fmt(v) {
    if (v >= 1e6) return '$' + (v / 1e6).toFixed(1) + 'M';
    if (v >= 1e3) return '$' + Math.round(v / 1e3) + 'K';
    return '$' + Math.round(v);
  }

  // ── Draw dial ──────────────────────────────────────────────────────
  function drawDial(pct) {
    pct = Math.min(Math.max(pct, 0), MAX_PCT);
    dialPctEl.textContent = pct.toFixed(1) + '%';

    // Active arc
    var d = describeArc(pct);
    if (d) activeArcEl.setAttribute('d', d);
    else   activeArcEl.removeAttribute('d');

    // Control tag: centered on arc at current angle, rotated radially
    var a          = percentToAngle(pct);
    var tx         = (CX + R * Math.cos(a)).toFixed(2);
    var ty         = (CY - R * Math.sin(a)).toFixed(2);
    var rotateDeg  = (-(a * 180 / Math.PI) + 90).toFixed(2);
    controlTagEl.setAttribute('transform',
      'translate(' + tx + ',' + ty + ') rotate(' + rotateDeg + ')');

    updateTickColors(pct);
  }

  // ── Update financial outputs ───────────────────────────────────────
  function updateNumbers() {
    var rent    = parseFloat(document.getElementById('annualRent').value)   || 0;
    var sqft    = parseFloat(document.getElementById('buildingSqft').value) || 0;
    var capRate = parseFloat(document.getElementById('capRate').value)      || 0;
    var hold    = parseFloat(document.getElementById('holdPeriod').value)   || 1;

    var rsf     = sqft * (currentPct / 100);
    var annual  = rsf * rent;
    var holdTot = annual * hold;
    var asset   = capRate > 0 ? annual / (capRate / 100) : 0;

    rsfNumEl.textContent  = '+' + Math.round(rsf).toLocaleString() + ' RSF';
    annualEl.textContent  = fmt(annual) + ' / ' + fmt(holdTot);
    assetEl.textContent   = fmt(asset);

    var tenants = Math.max(Math.round(rsf / 1000), 0);
    var suites  = Math.max(Math.round(rsf / 3000), 0);
    var floors  = Math.max(Math.round(rsf / 9000), 0);

    tenantsValEl.textContent = tenants;
    suitesValEl.textContent  = suites;
    floorsValEl.textContent  = floors;
    tenantsMult.textContent  = 'x ' + tenants;
    suitesMult.textContent   = 'x ' + suites;
    floorsMult.textContent   = 'x ' + floors;

    equivTitleEl.textContent =
      Math.round(rsf).toLocaleString() +
      ' SF in captured square footage is functionally equivalent to:';
  }

  // ── Full update ────────────────────────────────────────────────────
  function update() {
    drawDial(currentPct);
    updateNumbers();
  }

  // ── Drag / touch interaction ───────────────────────────────────────
  var dragging = false;

  function getAngleFromEvent(e) {
    var svg    = document.getElementById('dialSvg');
    var rect   = svg.getBoundingClientRect();
    var vb     = svg.viewBox.baseVal;
    var scaleX = vb.width  / rect.width;
    var scaleY = vb.height / rect.height;
    var clientX = e.touches ? e.touches[0].clientX : e.clientX;
    var clientY = e.touches ? e.touches[0].clientY : e.clientY;
    var svgX = (clientX - rect.left) * scaleX + vb.x;
    var svgY = (clientY - rect.top)  * scaleY + vb.y;
    var dx = svgX - CX;
    var dy = CY - svgY; // flip: SVG y-axis is inverted
    var angle = Math.atan2(dy, dx);
    return Math.min(Math.max(angle, 0), Math.PI);
  }

  var dialWrap = document.getElementById('dialWrap');

  dialWrap.addEventListener('mousedown', function (e) {
    dragging = true;
    e.preventDefault();
    currentPct = angleToPercent(getAngleFromEvent(e));
    update();
  });

  document.addEventListener('mousemove', function (e) {
    if (!dragging) return;
    currentPct = angleToPercent(getAngleFromEvent(e));
    update();
  });

  document.addEventListener('mouseup', function () { dragging = false; });

  dialWrap.addEventListener('touchstart', function (e) {
    dragging = true;
    e.preventDefault();
    currentPct = angleToPercent(getAngleFromEvent(e));
    update();
  }, { passive: false });

  document.addEventListener('touchmove', function (e) {
    if (!dragging) return;
    currentPct = angleToPercent(getAngleFromEvent(e));
    update();
  }, { passive: false });

  document.addEventListener('touchend', function () { dragging = false; });

  // ── Wire input fields to updateNumbers ────────────────────────────
  ['annualRent', 'buildingSqft', 'capRate', 'holdPeriod'].forEach(function (id) {
    var el = document.getElementById(id);
    el.addEventListener('input',  updateNumbers);
    el.addEventListener('change', updateNumbers);
  });

  // ── Initial load: render at 0%, then animate to 8% ────────────────
  update();

  var animTarget = 8.0;
  function animTick() {
    var diff = animTarget - currentPct;
    if (Math.abs(diff) > 0.02) {
      currentPct += diff * 0.09;
      update();
      requestAnimationFrame(animTick);
    } else {
      currentPct = animTarget;
      update();
    }
  }
  requestAnimationFrame(animTick);

})();
</script>
</body>
</html>
